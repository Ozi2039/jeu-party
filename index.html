<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google-style Snake</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
        
        #game-container {
            position: relative;
        }
        
        #player-selection {
            margin-bottom: 20px;
            text-align: center;
        }
        
        #player-selection select, #player-selection button {
            padding: 8px 15px;
            font-size: 16px;
            margin: 0 5px;
        }
        
        #score-display {
            display: flex;
            justify-content: space-between;
            width: 600px;
            margin-bottom: 10px;
            font-size: 18px;
            font-weight: bold;
        }
        
        #game-canvas {
            background-color: white;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        #controls {
            margin-top: 20px;
            text-align: center;
            color: #666;
        }
        
        #leaderboard {
            margin-top: 30px;
            width: 600px;
            border-collapse: collapse;
        }
        
        #leaderboard th, #leaderboard td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        #leaderboard th {
            background-color: #f2f2f2;
        }
        
        #leaderboard tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <div id="player-selection">
        <select id="player-select">
            <option value="">Select Player</option>
            <option value="Ozi">Ozi</option>
            <option value="Dim">Dim</option>
            <option value="Sam">Sam</option>
        </select>
        <button id="start-game">Start Game</button>
    </div>
    
    <div id="score-display" style="display: none;">
        <div id="current-player">Player: </div>
        <div id="current-score">Score: 0</div>
        <div id="best-score">Best: 0</div>
    </div>
    
    <div id="game-container" style="display: none;">
        <canvas id="game-canvas" width="600" height="600"></canvas>
    </div>
    
    <div id="controls" style="display: none;">
        Use arrow keys to control the snake
    </div>

    <table id="leaderboard">
        <thead>
            <tr>
                <th>Player</th>
                <th>Best Score</th>
            </tr>
        </thead>
        <tbody id="leaderboard-body">
            <!-- Leaderboard will be populated here -->
        </tbody>
    </table>

    <script>
        // Constants
        const CELL_SIZE = 20;
        const GRID_WIDTH = 600 / CELL_SIZE;
        const GRID_HEIGHT = 600 / CELL_SIZE;
        const WHITE = "#FFFFFF";
        const GREEN = "#00C800";
        const RED = "#FF0000";
        const BLACK = "#000000";
        
        // Game state
        let snake = [[10, 10]];
        let direction = [0, 0];
        let food = [0, 0];
        let score = 0;
        let currentPlayer = "";
        let gameLoop;
        
        // DOM elements
        const canvas = document.getElementById("game-canvas");
        const ctx = canvas.getContext("2d");
        const currentScoreElement = document.getElementById("current-score");
        const bestScoreElement = document.getElementById("best-score");
        const currentPlayerElement = document.getElementById("current-player");
        const playerSelect = document.getElementById("player-select");
        const startGameBtn = document.getElementById("start-game");
        const scoreDisplay = document.getElementById("score-display");
        const gameContainer = document.getElementById("game-container");
        const controls = document.getElementById("controls");
        const leaderboardBody = document.getElementById("leaderboard-body");
        
        // Initialize leaderboard from localStorage
        let leaderboard = {
            Ozi: localStorage.getItem("snakeBestScore_Ozi") || 0,
            Dim: localStorage.getItem("snakeBestScore_Dim") || 0,
            Sam: localStorage.getItem("snakeBestScore_Sam") || 0
        };
        
        // Update leaderboard display
        function updateLeaderboard() {
            leaderboardBody.innerHTML = "";
            
            // Convert leaderboard to array and sort by score
            const sortedLeaderboard = Object.entries(leaderboard)
                .sort((a, b) => b[1] - a[1]);
            
            sortedLeaderboard.forEach(([player, bestScore]) => {
                const row = document.createElement("tr");
                const playerCell = document.createElement("td");
                const scoreCell = document.createElement("td");
                
                playerCell.textContent = player;
                scoreCell.textContent = bestScore;
                
                if (player === currentPlayer) {
                    row.style.fontWeight = "bold";
                }
                
                row.appendChild(playerCell);
                row.appendChild(scoreCell);
                leaderboardBody.appendChild(row);
            });
        }
        
        // Initialize game for selected player
        function initGame() {
            currentPlayer = playerSelect.value;
            if (!currentPlayer) return;
            
            // Show game elements
            scoreDisplay.style.display = "flex";
            gameContainer.style.display = "block";
            controls.style.display = "block";
            
            // Set current player display
            currentPlayerElement.textContent = `Player: ${currentPlayer}`;
            
            // Load best score for current player
            const bestScore = leaderboard[currentPlayer] || 0;
            bestScoreElement.textContent = `Best: ${bestScore}`;
            
            // Reset game state
            snake = [[10, 10]];
            direction = [0, 0];
            score = 0;
            currentScoreElement.textContent = `Score: ${score}`;
            food = randomFood();
            
            // Start game loop
            if (gameLoop) clearInterval(gameLoop);
            gameLoop = setInterval(updateGame, 100);
            
            // Start listening for keyboard input
            document.addEventListener("keydown", handleKeyPress);
        }
        
        // Generate random food position
        function randomFood() {
            return [
                Math.floor(Math.random() * GRID_WIDTH),
                Math.floor(Math.random() * GRID_HEIGHT)
            ];
        }
        
        // Draw a rectangle
        function drawRect(pos, color) {
            ctx.fillStyle = color;
            ctx.fillRect(pos[0] * CELL_SIZE, pos[1] * CELL_SIZE, CELL_SIZE, CELL_SIZE);
        }
        
        // Handle keyboard input
        function handleKeyPress(e) {
            switch(e.key) {
                case "ArrowUp":
                    if (direction[1] !== 1) direction = [0, -1];
                    break;
                case "ArrowDown":
                    if (direction[1] !== -1) direction = [0, 1];
                    break;
                case "ArrowLeft":
                    if (direction[0] !== 1) direction = [-1, 0];
                    break;
                case "ArrowRight":
                    if (direction[0] !== -1) direction = [1, 0];
                    break;
            }
        }
        
        // Update game state
        function updateGame() {
            // Clear canvas
            ctx.fillStyle = WHITE;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Move snake if direction is set
            if (direction[0] !== 0 || direction[1] !== 0) {
                const newHead = [
                    snake[0][0] + direction[0],
                    snake[0][1] + direction[1]
                ];
                
                // Check for collisions
                if (
                    isCollision(newHead, snake) ||
                    newHead[0] < 0 || newHead[0] >= GRID_WIDTH ||
                    newHead[1] < 0 || newHead[1] >= GRID_HEIGHT
                ) {
                    gameOver();
                    return;
                }
                
                // Add new head
                snake.unshift(newHead);
                
                // Check if snake ate food
                if (newHead[0] === food[0] && newHead[1] === food[1]) {
                    score++;
                    currentScoreElement.textContent = `Score: ${score}`;
                    food = randomFood();
                } else {
                    // Remove tail if no food was eaten
                    snake.pop();
                }
            }
            
            // Draw food
            drawRect(food, RED);
            
            // Draw snake
            snake.forEach(block => drawRect(block, GREEN));
            
            // Draw scores on canvas (for better visibility)
            ctx.fillStyle = BLACK;
            ctx.font = "20px Arial";
            ctx.fillText(`Player: ${currentPlayer}`, 10, 25);
            ctx.fillText(`Score: ${score}`, 10, 50);
            ctx.fillText(`Best: ${leaderboard[currentPlayer] || 0}`, canvas.width - 130, 25);
        }
        
        // Check for collisions
        function isCollision(head, snakeBody) {
            return snakeBody.some(block => block[0] === head[0] && block[1] === head[1]);
        }
        
        // Handle game over
        function gameOver() {
            clearInterval(gameLoop);
            
            // Update best score if needed
            if (score > leaderboard[currentPlayer]) {
                leaderboard[currentPlayer] = score;
                localStorage.setItem(`snakeBestScore_${currentPlayer}`, score);
                bestScoreElement.textContent = `Best: ${score}`;
                updateLeaderboard();
            }
            
            // Show game over message
            ctx.fillStyle = BLACK;
            ctx.font = "40px Arial";
            ctx.textAlign = "center";
            ctx.fillText("GAME OVER", canvas.width / 2, canvas.height / 2 - 20);
            ctx.font = "20px Arial";
            ctx.fillText("Press Start Game to play again", canvas.width / 2, canvas.height / 2 + 20);
            ctx.textAlign = "start";
        }
        
        // Event listeners
        startGameBtn.addEventListener("click", initGame);
        
        // Initialize leaderboard
        updateLeaderboard();
    </script>
</body>
</html>
