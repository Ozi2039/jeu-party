<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de D√©mineur</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 300px;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .board {
            display: grid;
            grid-template-columns: repeat(10, 30px);
            grid-template-rows: repeat(10, 30px);
            gap: 2px;
            margin-bottom: 20px;
        }
        
        .cell {
            width: 30px;
            height: 30px;
            background-color: #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
            border: 2px outset #eee;
        }
        
        .cell.revealed {
            background-color: #eee;
            border: 1px solid #999;
        }
        
        .cell.mine {
            background-color: #f00;
            color: white;
        }
        
        .cell.flagged {
            background-color: #ff0;
        }
        
        .controls {
            margin-top: 20px;
        }
        
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
        }
        
        button:hover {
            background-color: #45a049;
        }
        
        .color-1 { color: blue; }
        .color-2 { color: green; }
        .color-3 { color: red; }
        .color-4 { color: darkblue; }
        .color-5 { color: brown; }
        .color-6 { color: teal; }
        .color-7 { color: black; }
        .color-8 { color: gray; }
    </style>
</head>
<body>
    <h1>Jeu de D√©mineur</h1>
    
    <div class="game-info">
        <div>Mines: <span id="mines-count">10</span></div>
        <div>Drapeaux: <span id="flags-count">0</span></div>
    </div>
    
    <div class="board" id="board"></div>
    
    <div class="controls">
        <button id="reset-btn">Nouvelle partie</button>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const BOARD_SIZE = 10;
            const MINES_COUNT = 10;
            
            const board = document.getElementById('board');
            const minesCountDisplay = document.getElementById('mines-count');
            const flagsCountDisplay = document.getElementById('flags-count');
            const resetBtn = document.getElementById('reset-btn');
            
            let gameBoard = [];
            let revealedCount = 0;
            let flaggedCount = 0;
            let gameOver = false;
            
            // Initialiser le jeu
            function initGame() {
                board.innerHTML = '';
                gameBoard = [];
                revealedCount = 0;
                flaggedCount = 0;
                gameOver = false;
                
                minesCountDisplay.textContent = MINES_COUNT;
                flagsCountDisplay.textContent = '0';
                
                // Cr√©er le tableau vide
                for (let y = 0; y < BOARD_SIZE; y++) {
                    gameBoard[y] = [];
                    for (let x = 0; x < BOARD_SIZE; x++) {
                        gameBoard[y][x] = {
                            mine: false,
                            revealed: false,
                            flagged: false,
                            adjacentMines: 0,
                            element: null
                        };
                    }
                }
                
                // Placer les mines al√©atoirement
                let minesPlaced = 0;
                while (minesPlaced < MINES_COUNT) {
                    const x = Math.floor(Math.random() * BOARD_SIZE);
                    const y = Math.floor(Math.random() * BOARD_SIZE);
                    
                    if (!gameBoard[y][x].mine) {
                        gameBoard[y][x].mine = true;
                        minesPlaced++;
                    }
                }
                
                // Calculer le nombre de mines adjacentes pour chaque case
                for (let y = 0; y < BOARD_SIZE; y++) {
                    for (let x = 0; x < BOARD_SIZE; x++) {
                        if (!gameBoard[y][x].mine) {
                            gameBoard[y][x].adjacentMines = countAdjacentMines(x, y);
                        }
                    }
                }
                
                // Cr√©er les √©l√©ments HTML
                for (let y = 0; y < BOARD_SIZE; y++) {
                    for (let x = 0; x < BOARD_SIZE; x++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.dataset.x = x;
                        cell.dataset.y = y;
                        
                        cell.addEventListener('click', () => handleCellClick(x, y));
                        cell.addEventListener('contextmenu', (e) => {
                            e.preventDefault();
                            handleRightClick(x, y);
                        });
                        
                        board.appendChild(cell);
                        gameBoard[y][x].element = cell;
                    }
                }
            }
            
            // Compter les mines adjacentes
            function countAdjacentMines(x, y) {
                let count = 0;
                
                for (let dy = -1; dy <= 1; dy++) {
                    for (let dx = -1; dx <= 1; dx++) {
                        if (dx === 0 && dy === 0) continue;
                        
                        const nx = x + dx;
                        const ny = y + dy;
                        
                        if (nx >= 0 && nx < BOARD_SIZE && ny >= 0 && ny < BOARD_SIZE && gameBoard[ny][nx].mine) {
                            count++;
                        }
                    }
                }
                
                return count;
            }
            
            // G√©rer le clic gauche
            function handleCellClick(x, y) {
                if (gameOver || gameBoard[y][x].revealed || gameBoard[y][x].flagged) return;
                
                revealCell(x, y);
                
                if (gameBoard[y][x].mine) {
                    // Game over - r√©v√©ler toutes les mines
                    gameOver = true;
                    revealAllMines();
                    alert('Game Over! Vous avez cliqu√© sur une mine.');
                } else if (revealedCount === BOARD_SIZE * BOARD_SIZE - MINES_COUNT) {
                    // Victoire
                    gameOver = true;
                    flagAllMines();
                    alert('F√©licitations! Vous avez gagn√©!');
                }
            }
            
            // G√©rer le clic droit (drapeau)
            function handleRightClick(x, y) {
                if (gameOver || gameBoard[y][x].revealed) return;
                
                const cell = gameBoard[y][x];
                
                if (cell.flagged) {
                    cell.flagged = false;
                    cell.element.classList.remove('flagged');
                    flaggedCount--;
                } else {
                    cell.flagged = true;
                    cell.element.classList.add('flagged');
                    flaggedCount++;
                }
                
                flagsCountDisplay.textContent = flaggedCount;
            }
            
            // R√©v√©ler une case
            function revealCell(x, y) {
                const cell = gameBoard[y][x];
                
                if (cell.revealed || cell.flagged) return;
                
                cell.revealed = true;
                cell.element.classList.add('revealed');
                revealedCount++;
                
                if (cell.mine) {
                    cell.element.classList.add('mine');
                    cell.element.textContent = 'üí£';
                } else if (cell.adjacentMines > 0) {
                    cell.element.textContent = cell.adjacentMines;
                    cell.element.classList.add(`color-${cell.adjacentMines}`);
                } else {
                    // R√©v√©ler les cases adjacentes si c'est une case vide
                    for (let dy = -1; dy <= 1; dy++) {
                        for (let dx = -1; dx <= 1; dx++) {
                            if (dx === 0 && dy === 0) continue;
                            
                            const nx = x + dx;
                            const ny = y + dy;
                            
                            if (nx >= 0 && nx < BOARD_SIZE && ny >= 0 && ny < BOARD_SIZE) {
                                revealCell(nx, ny);
                            }
                        }
                    }
                }
            }
            
            // R√©v√©ler toutes les mines (game over)
            function revealAllMines() {
                for (let y = 0; y < BOARD_SIZE; y++) {
                    for (let x = 0; x < BOARD_SIZE; x++) {
                        if (gameBoard[y][x].mine) {
                            gameBoard[y][x].element.classList.add('revealed', 'mine');
                            gameBoard[y][x].element.textContent = 'üí£';
                        }
                    }
                }
            }
            
            // Marquer toutes les mines (victoire)
            function flagAllMines() {
                for (let y = 0; y < BOARD_SIZE; y++) {
                    for (let x = 0; x < BOARD_SIZE; x++) {
                        if (gameBoard[y][x].mine && !gameBoard[y][x].flagged) {
                            gameBoard[y][x].flagged = true;
                            gameBoard[y][x].element.classList.add('flagged');
                        }
                    }
                }
                flaggedCount = MINES_COUNT;
                flagsCountDisplay.textContent = flaggedCount;
            }
            
            // Nouvelle partie
            resetBtn.addEventListener('click', initGame);
            
            // D√©marrer le jeu
            initGame();
        });
    </script>
</body>
</html>
