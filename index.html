<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>V√©rit√© Party</title>
<style>
  html, body {
    margin:0;
    padding:0;
    height:100%;
    width:100%;
    font-family:sans-serif;
    background:#0d1117;
    color:white;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }

  /* Conteneur t√©l√©phone */
  .phone {
    width: 320px;
    height: 600px;
    border-radius: 36px;
    background: url('Zu1MKPS9.jpg') no-repeat center/cover;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 20px;
    box-shadow: 0 0 40px rgba(0,0,0,0.5);
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
  }

  /* Overlay sombre pour lisibilit√© */
  .phone::before {
    content: "";
    position: absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background: rgba(0,0,0,0.5);
    z-index: 0;
    border-radius: 36px;
  }

  .phone > * { position: relative; z-index: 1; }

  /* Plein √©cran */
  .fullscreen {
    width: 100vw !important;
    height: 100vh !important;
    border-radius: 0 !important;
    box-shadow: none !important;
  }

  .screen {display:none; width:100%; flex-direction:column; align-items:center; justify-content:center;}
  .active {display:flex;}

  button {
    padding:12px 20px; 
    margin:5px; 
    border:none; 
    border-radius:8px; 
    cursor:pointer; 
    background:#00d4ff; 
    font-weight:bold; 
    font-size:16px;
    color:#000;
  }

  input, textarea {
    padding:8px; 
    margin:5px; 
    border-radius:6px; 
    border:none; 
    width:100%;
    background: rgba(255,255,255,0.8);
    color: #000;
  }

  .players-list div {margin:3px 0;}

  .call-box {text-align:center; width: 100%;}
  .caller {font-size:20px; margin-bottom:20px;}
  .slide-container {
    position: relative;
    width: 100%;
    height: 60px;
    background: rgba(0,0,0,0.6);
    border-radius: 30px;
    overflow: hidden;
  }
  .slide-btn {
    position: absolute;
    top:5px;
    left:5px;
    width:50px;
    height:50px;
    background:#00ff88;
    border-radius:50%;
    cursor:grab;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:bold;
    user-select: none;
    touch-action: none;
  }
  .question {
    font-size:20px;
    max-width:280px;
    padding:20px;
    background: rgba(0,0,0,0.7);
    border-radius:12px;
    margin:20px;
    text-align:center;
  }

  .slide-text {text-align:center; margin-top:10px; font-size:14px; color:#ccc;}

  /* Responsive PC */
  @media (max-width: 480px) {
    .phone { width: 100%; height: 100%; border-radius:0; }
    .phone::before { border-radius:0; }
    .question { max-width: 90%; }
  }

</style>
</head>
<body>

<div class="phone" id="phone">
  <div id="menu" class="screen active">
    <h1>üéâ V√©rit√© Party üéâ</h1>
    <button onclick="toggleFullScreen()">üì± Plein √©cran</button>
    <h3>Liste des joueurs</h3>
    <div id="playersList"></div>
    <input type="text" id="playerInput" placeholder="Nom du joueur">
    <button onclick="addPlayer()">Ajouter joueur</button>
    
    <h3>Questions (JSON)</h3>
    <textarea id="questionsInput" rows="5" cols="30"></textarea><br>
    <button onclick="saveQuestions()">Sauvegarder Questions</button>
    
    <br><br>
    <button id="playBtn">Jouer</button>
  </div>

  <div id="callScreen" class="screen">
    <div class="call-box">
      <div class="caller" id="callerName"></div>
      <div class="slide-container" id="slider">
        <div class="slide-btn" id="slideBtn">üìû</div>
      </div>
      <div class="slide-text">‚Üí Glisse pour d√©crocher</div>
    </div>
  </div>

  <div id="questionScreen" class="screen">
    <div class="question" id="questionText"></div>
    <div>
      <button onclick="continueGame()">Continuer</button>
      <button onclick="backToMenu()">Menu</button>
    </div>
  </div>
</div>

<script>
let players = [];
let questions = ["Quelle est ta plus grande honte ?", "Ton plus gros mensonge ?", "Ton secret le plus g√™nant ?"];
document.getElementById("questionsInput").value = JSON.stringify(questions, null, 2);

function addPlayer(){
  const name = document.getElementById("playerInput").value.trim();
  if(name){ players.push(name); document.getElementById("playerInput").value = ""; renderPlayers(); }
}
function renderPlayers(){
  const list = document.getElementById("playersList");
  list.innerHTML = players.map((p,i)=>`<div>${p} <button onclick="removePlayer(${i})">‚ùå</button></div>`).join("");
}
function removePlayer(i){ players.splice(i,1); renderPlayers(); }
function saveQuestions(){
  try { questions = JSON.parse(document.getElementById("questionsInput").value); alert("Questions mises √† jour !"); } 
  catch(e){ alert("Erreur JSON invalide !"); }
}

const menu = document.getElementById("menu");
const callScreen = document.getElementById("callScreen");
const questionScreen = document.getElementById("questionScreen");
const callerName = document.getElementById("callerName");
const questionText = document.getElementById("questionText");
const phone = document.getElementById("phone");

document.getElementById("playBtn").addEventListener("click", startGame);

function toggleFullScreen() {
  if (!document.fullscreenElement) {
    const docEl = document.documentElement;
    if (docEl.requestFullscreen) docEl.requestFullscreen();
    else if (docEl.webkitRequestFullscreen) docEl.webkitRequestFullscreen();
    else if (docEl.msRequestFullscreen) docEl.msRequestFullscreen();
    phone.classList.add('fullscreen');
  } else {
    if (document.exitFullscreen) document.exitFullscreen();
    else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
    phone.classList.remove('fullscreen');
  }
}

function startGame(){
  if(players.length===0){ alert("Ajoute au moins un joueur !"); return; }
  if(questions.length===0){ alert("Ajoute au moins une question !"); return; }

  const player = players[Math.floor(Math.random()*players.length)];
  const question = questions[Math.floor(Math.random()*questions.length)];

  callerName.textContent = `üìû Yo ${player}, Jackson t'appelle !`;
  questionText.textContent = question;

  menu.classList.remove("active");
  callScreen.classList.add("active");

  document.querySelectorAll('#menu input, #menu textarea, #menu button').forEach(el => el.style.display='none');

  initSlider();
}

function continueGame(){ callScreen.classList.remove("active"); questionScreen.classList.remove("active"); startGame(); }
function backToMenu(){ 
  questionScreen.classList.remove("active"); callScreen.classList.remove("active"); menu.classList.add("active");
  document.querySelectorAll('#menu input, #menu textarea, #menu button').forEach(el => el.style.display='block');
}

function initSlider(){
  const btn = document.getElementById("slideBtn");
  let isDragging=false, startX=0;
  btn.style.left="5px";

  btn.onmousedown=e=>{ isDragging=true; startX=e.clientX; };
  document.onmouseup=e=>{ 
    if(isDragging){ isDragging=false; if(parseInt(btn.style.left)>220){ callScreen.classList.remove("active"); questionScreen.classList.add("active"); } 
    else btn.style.left="5px"; } };
  document.onmousemove=e=>{ if(isDragging){ let dx=e.clientX-startX; btn.style.left=Math.min(Math.max(5,5+dx),225)+"px"; } };

  btn.ontouchstart=e=>{ isDragging=true; startX=e.touches[0].clientX; };
  btn.ontouchend=e=>{ if(isDragging){ isDragging=false; if(parseInt(btn.style.left)>220){ callScreen.classList.remove("active"); questionScreen.classList.add("active"); } else btn.style.left="5px"; } };
  btn.ontouchmove=e=>{ if(isDragging){ let dx=e.touches[0].clientX-startX; btn.style.left=Math.min(Math.max(5,5+dx),225)+"px"; e.preventDefault(); } };
}
</script>
</body>
</html>
